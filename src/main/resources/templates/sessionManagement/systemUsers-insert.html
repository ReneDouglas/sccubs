<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:replace="~{fragments/template :: head}"></head>
<body>
    <nav th:replace="~{fragments/template :: menu}"></nav>
    <h1>Formul√°rio de Cadastro</h1>
    <form th:action="${systemUser.id == null} ? @{/user/create} : @{/user/update}" method="post"
          th:object="${systemUser}">
        <div>
            <label for="username">Login:</label>
            <input type="text" id="username" th:field="*{username}" th:disabled="${systemUser.username != null}" name="username" required>
        </div>
        <br>
        <div>
            <label for="password">Senha:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <br>
        <div>
            <label for="name">Nome:</label>
            <input type="text" id="name" th:field="*{name}" name="name" required>
        </div>
        <br>
        <div>
            <label for="email">Email:</label>
            <input type="email" id="email" th:field="*{email}" name="email" required>
        </div>
        <br>
        <div>
            <label for="selectedRoleId">Perfil:</label>
            <select id="selectedRoleId" name="selectedRoleId" >
                <option th:each="role : ${rolesList}"
                        th:value="${role.id}"
                        th:text="${role.title}"
                        th:selected="*{roles.isEmpty()} ? ${role.id} == 2 : ${role.id} == *{roles.get(0).id}"></option>

            </select>
        </div>
        <br>
        <input type="hidden" id="id" th:field="*{id} "/>
        <div>
            <button type="submit">Enviar</button>
        </div>
        <p th:if="${message}" th:text="${message}"></p>
    </form>
</body>
</html>
