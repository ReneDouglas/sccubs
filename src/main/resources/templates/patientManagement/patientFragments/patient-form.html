<form th:fragment="patientForm"
      th:attr="hx-post=${patient.id == null} ? @{/patient-insert/create} : @{/patient-insert/update}"
      hx-target="this"
      hx-swap="outerHTML"
      hx-indicator=".htmx-indicator"
      th:object="${patient}">
<!--    th:attr="${patient.id == null} ? hx-post=@{/patient-insert/create} : hx-post=@{/patient-insert/update}"-->
<!--      th:action="${patient.id == null} ? @{/patient-insert/create} : @{/patient-insert/update}"-->

    <div>
        <label for="name">Nome completo:</label>
        <input type="text" id="name" th:field="*{name}" name="name" required>
    </div>
    <div>
        <label for="susNumber">Cartão SUS:</label>
        <input type="text" id="susNumber" th:field="*{susNumber}" th:disabled="${patient.susNumber != null}"
               name="susNumber" required>
        <th:block th:if="${patient.susNumber != null}">
            <input type="hidden" th:field="*{susNumber}"/>
        </th:block>
    </div>
    <div>
        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" th:field="*{cpf}" th:disabled="${patient.cpf != null}"
               name="cpf" required>
        <th:block th:if="${patient.cpf != null}">
            <input type="hidden" th:field="*{cpf}"/>
        </th:block>
    </div>
    <div>
        <label for="gender">Sexo:</label>
        <select id="gender" name="gender" th:field="*{gender}" required>
            <option th:value="${null}" th:selected="${patient.id == null}">Selecione</option>
            <option value="Feminino" th:selected="${patient.id != null ? patient.gender == 'Feminino' : false}">Feminino</option>
            <option value="Masculino" th:selected="${patient.id != null ? patient.gender == 'Masculino' : false}">Masculino</option>
        </select>
    </div>
    <div>
        <label for="birthDate">Data de Nascimento:</label>
        <input type="date" id="birthDate" name="birthDate" th:field="*{birthDate}" required>
    </div>
    <div>
        <label for="socialSituationRating">Situação Social:</label>
        <select id="socialSituationRating" name="socialSituationRating" th:field="*{socialSituationRating}" required>
            <option th:value="${null}" th:selected="${patient.id == null}">Selecione</option>
            <option th:each="situation : ${T(br.com.tecsus.sccubs.enums.SocialSituationRating).values()}"
                    th:value="${situation}"
                    th:text="${situation.description}"
                    th:selected="*{socialSituationRating == null} ? ${situation} == null  : ${situation} == *{socialSituationRating}"></option>
        </select>
    </div>
    <div>
        <label for="phoneNumber">Telefone:</label>
        <input type="text" id="phoneNumber" name="phoneNumber" th:field="*{phoneNumber}" required>
    </div>
    <div>
        <label for="addressStreet">Endereço (rua; comunidade ou sítio para zona rural):</label>
        <input type="text" id="addressStreet" name="addressStreet" th:field="*{addressStreet}" required>
    </div>
    <div>
        <label for="addressNumber">Número:</label>
        <input type="text" id="addressNumber" name="addressNumber" th:field="*{addressNumber}">
    </div>
    <div>
        <label for="addressComplement">Complemento:</label>
        <input type="text" id="addressComplement" name="addressComplement" th:field="*{addressComplement}">
    </div>
    <div>
        <label for="addressReference">Referência:</label>
        <input type="text" id="addressReference" name="addressReference" th:field="*{addressReference}">
    </div>
    <div>
        <label for="acsName">ACS:</label>
        <input type="text" id="acsName" name="acsName" th:field="*{acsName}">
    </div>
    <input type="hidden" id="id" th:field="*{id}"/>
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <div>
        <button type="submit">Enviar</button>
        <button>Cancelar</button>
    </div>
</form>